parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"AFU5":[function(require,module,exports) {
module.exports="pouring-coffee-sound.bcccc0e3.mp3";
},{}],"XWca":[function(require,module,exports) {
module.exports="switch-click-button-sound.0ad8f486.mp3";
},{}],"U6LU":[function(require,module,exports) {
module.exports="fulling-sound.c766ba47.mp3";
},{}],"MwEK":[function(require,module,exports) {
module.exports="grinder-sound.cf3181c2.mp3";
},{}],"Zqhk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioManager=void 0;var n=function(){function n(n){this.sound=null,this.config=n;var o=require("../assets/sounds/pouring-coffee-sound.mp3"),s=require("../assets/sounds/switch-click-button-sound.mp3"),i=require("../assets/sounds/fulling-sound.mp3"),e=require("../assets/sounds/grinder-sound.mp3");this.clickButtonsSound=new Audio(s),this.pouringCoffeeSound=new Audio(o),this.fillingContainerSound=new Audio(i),this.grindCoffeeBeansSound=new Audio(e)}return n.prototype.play=function(n){switch(n){case"clickButtonsSound":this.sound=this.clickButtonsSound;break;case"pouringCoffeeSound":this.sound=this.pouringCoffeeSound;break;case"fillingContainerSound":this.sound=this.fillingContainerSound;break;case"grindCoffeeBeansSound":this.sound=this.grindCoffeeBeansSound}this.sound.volume=this.config.volume,this.sound.play().finally()},n.prototype.stop=function(n){switch(n){case"clickButtonsSound":this.sound=this.clickButtonsSound;break;case"pouringCoffeeSound":this.sound=this.pouringCoffeeSound}this.sound.pause()},n}();exports.AudioManager=n;
},{"../assets/sounds/pouring-coffee-sound.mp3":"AFU5","../assets/sounds/switch-click-button-sound.mp3":"XWca","../assets/sounds/fulling-sound.mp3":"U6LU","../assets/sounds/grinder-sound.mp3":"MwEK"}],"u8ex":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CoffeeCup=void 0;var e=function(){return function(e){this.isFull=!1,this.cupElement=e.cupElement,this.pouredLiquidElement=e.pouredLiquidElement}}();exports.CoffeeCup=e;
},{}],"SAGc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Publisher=void 0;var e=function(){function e(){this.eventHandlers={}}return e.prototype.emit=function(e,t){this.eventHandlers[e].forEach(function(e){return e(t)})},e.prototype.on=function(e,t){this.eventHandlers[e]||(this.eventHandlers[e]=[]),this.eventHandlers[e].push(t)},e.prototype.onEvents=function(e){for(var t=0,n=Reflect.ownKeys(e);t<n.length;t++){var r=n[t];this.on(String(r),e[String(r)])}},e}();exports.Publisher=e;
},{}],"Fdy1":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractCoffeeMachineUI=void 0;var e=require("./publisher"),r=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r}(e.Publisher);exports.AbstractCoffeeMachineUI=r;
},{"./publisher":"SAGc"}],"vPVr":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(n,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])})(n,t)};return function(n,t){function o(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.CoffeeMachineGUI=void 0;var n=require("./audio-manager"),t=require("./coffee-cup"),o=require("./abstract-coffee-machine-ui"),i=function(o){function i(e){e.hints;var i=o.call(this)||this;return i.audioManager=new n.AudioManager({volume:.5}),i.buttonElements=document.getElementsByClassName("button"),i.switchOnButton=Array.prototype.filter.call(i.buttonElements,function(e){return e.classList.contains("button_is-switch-on")})[0],i.coffeeMachineElement=document.getElementsByClassName("coffee-machine")[0],i.ingredientContainers=document.getElementsByClassName("container"),i.buttonElementsNav=document.getElementsByClassName("coffee-list")[0],i.cup=new t.CoffeeCup({cupElement:document.getElementsByClassName("coffee-cup-factor")[0],pouredLiquidElement:document.getElementsByClassName("coffee-cup")[0]}),i.boundHandlerOnSelectedCoffee=i.handlerOnSelectedCoffee.bind(i),i.setupControlsHandlers(),i}return e(i,o),i.prototype.setupEvents=function(e){var n=this;e.onEvents({coffeeReady:function(e){n.stopAnimation("busy"),n.enableAllButtons(),n.audioManager.stop("grindCoffeeBeansSound"),n.setupOnMakeCoffeeTypesOnEventClick(),console.log("–ö–æ—Ñ–µ –≥–æ—Ç–æ–≤!"),n.audioManager.stop("pouringCoffeeSound"),n.showIngredientsAvailable(e),n.renderIngredientsAvailable(e)},noAnythingIngredient:function(){n.stopAnimation("busy"),n.startAnimation("error")},noMilk:function(){console.log("–∫–∞–∂–µ—Ç—Å—è –Ω–µ—Ç –º–æ–ª–æ–∫–∞"),n.showContainerStatus("milk"),n.fillContainer("milk")},noGrains:function(){console.log("–Ω–µ—Ç –∑–µ—Ä–µ–Ω"),n.showContainerStatus("grain"),n.fillContainer("grain")},noWater:function(){console.log("–Ω–µ—Ç –≤–æ–¥—ã"),n.showContainerStatus("water"),n.fillContainer("water")},replenishmentOfIngredients:function(e){Object.values(e).every(function(e){return e>10})&&(n.stopAnimation("error"),n.emit("filledAllContainers"))},returnCoffeeTypes:function(e){n.showTypesCoffee(e),n.enableAllButtons(),n.setupOnMakeCoffeeTypesOnEventClick()},whipping:function(){console.log("–≤–∑–±–∏–≤–∞—é üåÄ...")},pouring:function(e){var t=e.colorCoffee,o=e.ms;n.startPouringDrinkAnimation(o,t),n.audioManager.play("pouringCoffeeSound"),console.log("–Ω–∞–ª–∏–≤–∞—é ü•õ...")},cleaning:function(){console.log("–æ—á–∏—â–∞—é...")},clear:function(){console.log("–æ—á–∏—Å—Ç–∏–ª üßπ")},canOff:function(){n.setupSwitchOffHandler()},ready:function(e){n.showTypesCoffee(e),n.stopAnimation("busy"),n.setupOnMakeCoffeeTypesOnEventClick(),n.setupSwitchOffHandler(),console.log("—è –≥–æ—Ç–æ–≤–∞ –¥–µ–ª–∞—Ç—å –∫–æ—Ñ–µ!")},switchedOn:function(){n.coffeeMachineElement.classList.remove("off")},switchedOff:function(){n.removeOnMakeCoffeeTypesOnEventClick(),n.switchOnButton.setAttribute("aria-checked","false"),n.coffeeMachineElement.classList.add("off"),n.setupControlsHandlers(),console.log("\n\n\n\n\n\n\n\n")},checking:function(e){console.log("–ø—Ä–æ–≤–µ—Ä—è—é..."),e&&n.cup.pouredLiquidElement.classList.remove("pouring-mode"),n.startAnimation("busy")},brewing:function(e){var t=e.coffeeType;n.audioManager.play("grindCoffeeBeansSound"),console.log("–∑–∞–≤–∞—Ä–∏–≤–∞—é "+t.coffeeName)},welcome:function(e){return n.greeting(e)},init:function(e){n.renderIngredientsAvailable(e),n.showIngredientsAvailable(e)}})},i.prototype.renderIngredientsAvailable=function(e){Array.prototype.map.call(document.getElementsByClassName("container"),function(n){for(var t=0,o=Reflect.ownKeys(e);t<o.length;t++){var i=o[t],r=n.getElementsByClassName(""+String(i))[0];r&&(r.style.clipPath="polygon(0 "+(100-e[i])+"%,\n          100% "+(100-e[i])+"%, 100% 100%, 0 100%)")}})},i.prototype.fillContainer=function(e){Array.prototype.find.call(this.ingredientContainers,function(n){return n.children[0].dataset.containerName===e}).addEventListener("click",this.boundHandlerOnFullContainer(e),{once:!0})},i.prototype.boundHandlerOnFullContainer=function(e){return this.handlerOnFullContainer.bind(this,e)},i.prototype.countAmountOfIngredient=function(){var e=+prompt("–°–∫–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç—å?","100");return(e>100||null===e)&&(e=100),e},i.prototype.handlerOnFullContainer=function(e,n){var t=this.countAmountOfIngredient();this.renderInfoContainer(e,t),n.currentTarget.removeEventListener("click",this.boundHandlerOnFullContainer(e)),this.showContainerStatus(e),this.audioManager.play("fillingContainerSound"),this.emit("filledContainer",{containerName:e,amountOf:t})},i.prototype.renderInfoContainer=function(e,n){var t=document.getElementsByClassName(e)[0];document.getElementsByClassName("coffee-machine__"+e)[0].textContent=String(e+": "+n),t.style.clipPath="polygon(0 "+(100-n)+"%, 100% "+(100-n)+"%, 100% 100%, 0 100%)"},i.prototype.showIngredientsAvailable=function(e){for(var n=document.getElementsByClassName("information")[0].children,t=function(t){e.hasOwnProperty(t)&&Array.prototype.forEach.call(n,function(n){return n.dataset.name===t?n.textContent=t+": "+e[t]:""})},o=0,i=Object.keys(e);o<i.length;o++){t(i[o])}},i.prototype.setupOnMakeCoffeeTypesOnEventClick=function(){this.buttonElementsNav.addEventListener("click",this.boundHandlerOnSelectedCoffee)},i.prototype.removeOnMakeCoffeeTypesOnEventClick=function(){this.buttonElementsNav.removeEventListener("click",this.boundHandlerOnSelectedCoffee)},i.prototype.handlerOnSelectedCoffee=function(e){console.clear(),"button"===e.target.type&&(this.startAnimation("busy"),this.disableAllButtons(e),this.removeOnMakeCoffeeTypesOnEventClick(),this.emit("coffeeSelected",e.target.textContent))},i.prototype.disableAllButtons=function(e){Array.prototype.forEach.call(e.currentTarget.getElementsByTagName("button"),function(e){return e.disabled=!0})},i.prototype.enableAllButtons=function(){Array.prototype.forEach.call(this.buttonElementsNav.getElementsByTagName("button"),function(e){return e.disabled=!1})},i.prototype.startAnimation=function(e){this.switchOnButton.classList.add(e+"-mode")},i.prototype.stopAnimation=function(e){this.switchOnButton.setAttribute("aria-checked","true"),this.switchOnButton.classList.remove(e+"-mode")},i.prototype.startPouringDrinkAnimation=function(e,n){this.cup.pouredLiquidElement.style.fill=n,this.cup.pouredLiquidElement.classList.add("pouring-mode"),this.cup.pouredLiquidElement.style.animationDuration=e+"ms"},i.prototype.setupControlsHandlers=function(){var e=this;Array.prototype.forEach.call(this.buttonElements,function(n){return n.addEventListener("click",e.audioManager.play.bind(e.audioManager,"clickButtonsSound"))}),this.switchOnButton.addEventListener("click",function(){e.eventHandlers.switchOn.forEach(function(e){return e()})},{once:!0})},i.prototype.setupSwitchOffHandler=function(){var e=this;this.switchOnButton.addEventListener("click",function(){e.eventHandlers.switchOff.forEach(function(e){return e()})},{once:!0})},i.prototype.showContainerStatus=function(e){Array.prototype.find.call(document.getElementsByClassName("container-inner"),function(n){return n.dataset.containerName===e}).classList.toggle("error-mode")},i.prototype.greeting=function(e){var n=e.coffeeTypes;console.log("\n      –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!\n      –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å –Ω–∞—à–∏–º –º–µ–Ω—é:\n      "+n.join(", ")+"\n      –î–ª—è –≤—ã–±–æ—Ä–∞ –Ω–∞–ø–∏—Ç–∫–∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–±–µ—Ä–µ—Ç–µ –µ–≥–æ –≤ –ø–∞–Ω–µ–ª–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.\n      –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∞–ø–ø–µ—Ç–∏—Ç–∞!\n    ")},i.prototype.showTypesCoffee=function(e){if(0===this.buttonElementsNav.childElementCount){var n=this.buttonElementsNav;e.forEach(function(e){var t=document.createElement("button");t.type="button";var o=document.createElement("li");t.textContent=e,o.appendChild(t),n.appendChild(o)})}},i}(o.AbstractCoffeeMachineUI);exports.CoffeeMachineGUI=i;
},{"./audio-manager":"Zqhk","./coffee-cup":"u8ex","./abstract-coffee-machine-ui":"Fdy1"}],"MlMz":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.InsufficientIngredientsCoffeeMachineState=exports.PourCoffeeCoffeeMachineState=exports.WhipMilkCoffeeMachineState=exports.BrewCoffeeMachineState=exports.ReadyCoffeeMachineState=exports.CoffeeSelectedCoffeeMachineState=exports.PrepareCoffeeMachineState=exports.StartCoffeeMachineState=exports.OffCoffeeMachineState=exports.CoffeeMachineState=void 0;var e=function(){function t(t){this.coffeeMachine=t,console.dir(this),this.onEnter()}return t.prototype.onEnter=function(){},t}();exports.CoffeeMachineState=e;var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.onEnter=function(){this.coffeeMachine.isOn=!1},n.prototype.turnOff=function(){},n.prototype.turnOn=function(){this.coffeeMachine.setState(o)},n}(e);exports.OffCoffeeMachineState=n;var o=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.onEnter=function(){this.coffeeMachine.isOn=!0,this.coffeeMachine.emit("welcome",{coffeeTypes:this.coffeeMachine.coffeeTypes}),this.coffeeMachine.prepare(2e3)},n.prototype.turnOff=function(){},n.prototype.turnOn=function(){},n}(e);exports.StartCoffeeMachineState=o;var r=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.turnOn=function(){},n.prototype.turnOff=function(){},n}(e);exports.PrepareCoffeeMachineState=r;var f=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.turnOn=function(){},n.prototype.turnOff=function(){},n}(e);exports.CoffeeSelectedCoffeeMachineState=f;var i=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t(o,e),o.prototype.turnOn=function(){},o.prototype.turnOff=function(){this.coffeeMachine.setState(n)},o}(e);exports.ReadyCoffeeMachineState=i;var c=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.turnOn=function(){},n.prototype.turnOff=function(){},n}(e);exports.BrewCoffeeMachineState=c;var u=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.turnOn=function(){},n.prototype.turnOff=function(){},n}(e);exports.WhipMilkCoffeeMachineState=u;var p=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.turnOn=function(){},n.prototype.turnOff=function(){},n}(e);exports.PourCoffeeCoffeeMachineState=p;var a=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t(o,e),o.prototype.onEnter=function(){this.coffeeMachine.emit("canOff")},o.prototype.turnOn=function(){},o.prototype.turnOff=function(){this.coffeeMachine.setState(n)},o}(e);exports.InsufficientIngredientsCoffeeMachineState=a;
},{}],"MxwO":[function(require,module,exports) {
"use strict";function e(e){var t=this;return new Promise(function(r){return setTimeout(r,t.isDev?10:e)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.delay=void 0,exports.delay=e;
},{}],"CprM":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),t=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function a(e){try{f(i.next(e))}catch(t){o(t)}}function s(e){try{f(i.throw(e))}catch(t){o(t)}}function f(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}f((i=i.apply(e,t||[])).next())})},n=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CoffeeMachine=void 0;var i=require("./states"),r=require("./publisher"),o=require("./utils"),a=function(r){function a(e){var t=r.call(this)||this,n=e.dev,o=e.interfaces,a=e.recipes;return t.state=new i.OffCoffeeMachineState(t),t.isDev=n,t.isOn=!1,t.cupIsFull=!1,t.isClean=!0,t.recipes=a,t.coffeeTypes=t.recipes.map(function(e){return e.coffeeName}),t.wasteAmount=0,t.ingredientsAvailable={grain:100,water:100,milk:100},o.forEach(function(e){e.onEvents({switchOn:function(){return t.turnOn()},switchOff:function(){return t.turnOff()},coffeeSelected:function(e){return t.makeCoffee(e)},filledContainer:function(e){t.ingredientsAvailable[e.containerName]=e.amountOf,t.emit("replenishmentOfIngredients",t.ingredientsAvailable)},filledAllContainers:function(){t.setState(i.ReadyCoffeeMachineState),t.emit("ready",t.coffeeTypes)}}),e.setupEvents(t)}),t.emit("init",t.ingredientsAvailable),t}return e(a,r),a.prototype.searchTargetRecipe=function(e){return this.recipes.find(function(t){return t.coffeeName===e})},a.prototype.clean=function(){this.emit("cleaning"),this.wasteAmount>=50&&this.wasteAmount<=100&&(this.wasteAmount=0,this.emit("clear")),this.isClean=!0},a.prototype.getLowIngredients=function(){for(var e={},t=0,n=Reflect.ownKeys(this.ingredientsAvailable);t<n.length;t++){var i=n[t],r=this.ingredientsAvailable[i];r<=20&&(e[i]=r)}return e},a.prototype.setState=function(e){this.state=new e(this)},a.prototype.prepare=function(e){var t=this;void 0===e&&(e=2e3),this.setState(i.PrepareCoffeeMachineState),this.emit("checking",this.cupIsFull),o.delay(e).then(function(){t.isClean||t.clean();var e=t.getLowIngredients(),n=e.milk,r=e.grain,o=e.water;if(n||r||o)return t.setState(i.InsufficientIngredientsCoffeeMachineState),t.emit("noAnythingIngredient"),n&&t.emit("noMilk"),r&&t.emit("noGrains"),void(o&&t.emit("noWater"));t.setState(i.ReadyCoffeeMachineState),t.emit("ready",t.coffeeTypes)})},a.prototype.turnOn=function(){this.state.turnOn(),this.emit("switchedOn")},a.prototype.turnOff=function(){this.state.turnOff(),this.emit("switchedOff")},a.prototype.makeCoffee=function(e){return t(this,void 0,void 0,function(){var t;return n(this,function(n){switch(n.label){case 0:return this.setState(i.CoffeeSelectedCoffeeMachineState),this.emit("checking",this.cupIsFull),t=this.searchTargetRecipe(e),[4,this.brewCoffee(t)];case 1:return n.sent(),t.recipe.withMilk?[4,this.whipMilk()]:[3,3];case 2:n.sent(),n.label=3;case 3:return[4,this.pourCoffee(t.color)];case 4:return n.sent(),[4,this.coffeeReady()];case 5:return n.sent(),[2]}})})},a.prototype.coffeeReady=function(){this.setState(i.ReadyCoffeeMachineState),this.emit("returnCoffeeTypes",this.coffeeTypes)},a.prototype.brewCoffee=function(e,t){var n=this;return void 0===t&&(t=4e3),this.setState(i.BrewCoffeeMachineState),this.emit("brewing",{coffeeType:e}),o.delay(t).then(function(){n.consumeIngredients(e)})},a.prototype.consumeIngredients=function(e){var t=e.recipe,n=t.waterRequired,i=t.grainRequired,r=t.milkRequired;this.ingredientsAvailable.milk-=r,this.ingredientsAvailable.grain-=i,this.ingredientsAvailable.water-=n,this.wasteAmount+=i,this.isClean=!1},a.prototype.pourCoffee=function(e,t){var n=this;return void 0===t&&(t=2e3),this.setState(i.PourCoffeeCoffeeMachineState),this.emit("pouring",{colorCoffee:e,ms:t}),o.delay(t).then(function(){n.cupIsFull=!0,n.emit("coffeeReady",n.ingredientsAvailable)})},a.prototype.whipMilk=function(e){var t=this;return void 0===e&&(e=6e3),this.setState(i.WhipMilkCoffeeMachineState),o.delay(e).then(function(){t.emit("whipping")})},a}(r.Publisher);exports.CoffeeMachine=a;
},{"./states":"MlMz","./publisher":"SAGc","./utils":"MxwO"}],"RGUf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./coffee-machine-gui"),i=require("./coffee-machine"),r=new i.CoffeeMachine({dev:!1,interfaces:[new e.CoffeeMachineGUI({hints:!1})],recipes:[{coffeeName:"cappuccino",color:"#CFAA8F",recipe:{withMilk:!0,milkRequired:20,waterRequired:10,grainRequired:20}},{coffeeName:"raf",color:"#CFA780",recipe:{withMilk:!0,milkRequired:20,waterRequired:10,grainRequired:20}},{coffeeName:"dark coffee",color:"#4F240A",recipe:{withMilk:!1,milkRequired:0,waterRequired:10,grainRequired:20}}]});window.cm=r;
},{"./coffee-machine-gui":"vPVr","./coffee-machine":"CprM"}]},{},["RGUf"], null)
//# sourceMappingURL=main.fb02782e.js.map